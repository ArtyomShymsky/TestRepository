# Тест разработчика C# №2 (шаблон)

<aside>
⚠️ Отвечайте самостоятельно, не стремитесь подсмотреть в справочниках, гугле и тому подобных. Если не знаете ответ на вопрос - совершенно нормально его пропустить. Качество и самостоятельность ответов будем обсуждать на очных интервью, поэтому предлагаем не читерить и экономить Ваше и наше время.
  
⚠️ Публикуйте свой Gist с расширением MD чтобы сохранить форматирование и читаемость.

</aside>

# 1. Общие вопросы

### 1.1 String и DateTime

Что будет выведено в консоль и почему?

```csharp
class Program {
  static String location;
  static DateTime time;
 
  static void Main() {
    Console.WriteLine(location == null ? "location is null" : location);
    Console.WriteLine(time == null ? "time is null" : time.ToString());
  }
}
```

---

> Ваш ответ - будет выведено примерно следующее
> location is null -потому что String  ссылочный тип и его значение не было инициализировано,следовательно ссылка = null
> 1.1.0001 0:0:0 - (примерно такой формат) т.к. DateTime - value type(тип значений) и оно будет иницилизировано нулевыми значениями по умолчанию.


### 1.2 Enumerators

Что будет выведено в консоль?

```csharp
IEnumerable<int> EnumerateInts(int length) {
  for (var i = 0; i < length; i++) {
    Console.WriteLine(i);
    yield return i;
  }
}

var items = EnumerateInts(3);
```

---

> Ваш ответ
> не будет выведено ничего, т.к.  yield return лишь возвращает энумератор(итератор) последовательности, причем с отложенным выполнением.Выполнение которого будет запущено лишь при непосредственном перечислении этой коллекции в каком
> либо цикле while,for и т.д.

### 1.3 Базовые классы List

Перечислите приблизительно на память от каких базовых классов наследуется `List<>` и какие интерфейсы он реализует?

---

> Ваш ответ
> IEnumerable,ICollection,Ilist

# 2. Entity Framework

### 2.1 Запросы

Какие запросы (приблизительно) будут направлены в SQL-сервер во время исполнения следующего кода:

```csharp
class Student {
  public int Id {get;set;}
  public string Name {get;set;}
  public int Course {get;set;}
  public DateTime BirthDate {get;set;}
}

var student = context.Students.FirstOrDefault(s => s.Id == 1);
student.Name = "Oleg";
context.SaveChanges();
```

---

> Ваш ответ - скорее всего будет объявлена транзакция имеющая примерно следующий вид
> BEGIN TRY
> BEGIN TRANSACTION;
> SELECT TOP(1) *
> FROM Students
> WHERE Id = 1;
> UPDATE Students
> SET Name = 'Oleg'
> WHERE Id = 1;
> COMMIT TRANSACTION;
> END TRY
> BEGIN CATCH
> ROLLBACK TRANSACTION;
> END CATCH
### 2.2 Трекинг изменений

Для чего предназначен метод `IQueryable.AsNoTracking()`? Когда его следует использовать?

---

> Ваш ответ
> Этот метод отвязывает отслеживание изменений объекта служащего для представления данных полученных из базы. Этот метод следует использовать когда данные полученные из базы используются только для чтения, что приводит к улучшению
> производительности и уменьшению расходов ресурсов машины.

### 2.3 Запросы

Что произойдёт при выполнении первой строки и второй? Какого типа будут переменные `items1` и `items2`?

```csharp
var items1 = context.Students.Take(5).ToList();
var items2 = context.Students.ToList().Take(5);
```

---

> Ваш ответ
> метод ToList() - является методом материализации запроса, т.е. преобразования составленного expression tree в sql запрос. после его выполнения получается типизированный список, в данном случае List<Student>.
>в результате выполнения(материализации) первого запроса сгенерируется запрос примерного вида select top 5 * from students, т.е. фильтрация  первых 5 элементов выполнится на уровне бд и в оперативной памяти программы будет размещено только 5 записей.items1 будет типа List<Student>.
> второй запрос  будет выполнен несколько по иному.в результате выполнения(материализации) первой части второго запроса (context.Students.ToList()) будет сгенерирован запрос примерного вида select * from students и в оперативной памяти будет изначально размещены все элементы таблицы students. После этого будет выполнена фильтрация коллекции и получено первые 5 элементов и тип items2 будет enumerable<student>.

# 3. Dependency Injection

### 3.1. Жизненный цикл

Опишите чем отличается регистрация типов или объектов методами `.AddTransient()`, `.AddScoped()` и `.AddSingleton()`?

---

> Ваш ответ
> Если мы рассматриваем asp.net то эти типы регистрации сервисов показывают время жизни сервисов в райтайме приложения. где Singleton - один экземпляр сервиса живет весь райтайм приложения(логи и т.д), Scoped - в рамках обработки 1 запроса используется один и тот же экземпляр сервиса(бд и т.д), Transient - сервис создается каждый раз когда он вызывается в коде в рамках обработки запроса(разного рода коротжэивущие сервисы где не нужно хранить никакое состояние-генераторы отчетов и т.д).

# 4. Разное

### 4.1. Паттерн MVVM

Что такое MVVM? Почему он обрёл популярность именно в WPF?

> Ваш ответ
> MVVM подход обрел популярность для разработки WPF по нескольким причинам.
> Вот несколькие из них:
> 1) Поддержка WPF двухсторонней привязки данных(bindings) используя интерфейсы INotifyPropertyChanged и тому подобные интейфейсы через рефлексию.
> 2) В рамках MVVM ViewModel не зависит от View, что облегчает тестирование и использовать DI контейнеры.

### 4.2. INotifyPropertyChanged

Опишите состав интерфейса INotifyPropertyChanged. В чём разница?

```csharp
PropertyChanged("City");
PropertyChanged(null);
```

> Ваш ответ
> PropertyChanged("City"); - добавляет уведомления об измнении только свойства City объекта 
> PropertyChanged(null) -  добавляет уведомления об измнении всех свойств объекта 

### 4.3 Методы HTTP-протокола

Объясните разницу между PUT, POST, PATCH.

> Ваш ответ
> POST - создание объекта
> PUT - обновление всего объекта
> PATCH - обновление части объекта
# 5. Задачи

### 5.1 Проектирование БД

Спроектируйте таблицы в реляционной БД для хранения двумерных матриц произвольного размера (M**×**N). Укажите в свободной форме состав полей таблицы/таблиц.

---

> Ваш ответ
> Предлагаю сделать 2 таблицы. Первая следующего вида: MatrixId - идентефикатор конкретной матрицы,RowsCount -числос строк, ColumnsCount -число столбцов
> Вторая таблица: elementID - номер элемента в конкретной матрице, MatrixId - внешний ключ на таблицу 1(порказывает принадлежность элемента к конкретной матрице), Rownumber -номер строки в матрице, CollumnNumber - номер колонки в матрице, Value - значение лежащее в данном месте матрицы

### 5.2 Уникальный символ

Напишите реализацию функции, которая принимает на вход строку из символов `a-z`, а на выходе выдаёт первый уникальный символ (который встречается в строке ровно 1 раз), либо `null`, если такого символа нет.

---

```csharp
public static char? FirstUnique(string str) {
      if (string.IsNullOrEmpty(str))
       return null;

   if(!Regex.IsMatch(str, @"^[a-zA-Z]+$"))
       return null;

   var charsDictionary = new Dictionary<char, int>();
 
  
   foreach (char currentChar in str)
   {
       if (charsDictionary.ContainsKey(currentChar))
       {
           charsDictionary[currentChar]++;

       }
       else
       {
           charsDictionary[currentChar] = 1;

       }
   }

   foreach (char currentChar in str)
   {
      if (charsDictionary[currentChar]== 1)
        return currentChar;
   }

   return null;
}
```
